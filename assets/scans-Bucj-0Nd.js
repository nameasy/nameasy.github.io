import"./projects-BZa-CiKp.js";import"./related-DxiG54xw.js";const d=document.querySelector(".gallery__nav-list"),h=document.querySelector(".gallery__preloader"),c=document.querySelector(".gallery__list");fetch("./data/images.json").then(o=>o.json()).then(o=>{const y=o;y.forEach(n=>{const e=document.createElement("li");e.classList.add("gallery__item",...n.filters);const a=document.createElement("a");a.classList.add("gallery__link"),a.href=`images/${n.src}`;const t=document.createElement("figure");t.classList.add("gallery__figure");const l=document.createElement("img");l.classList.add("gallery__image"),l.loading="lazy",l.src=`images/${n.src}`,l.addEventListener("load",()=>{const g=l.naturalWidth,p=l.naturalHeight,v=`${g}x${p}`;e.setAttribute("data-size",v)}),t.append(l),a.append(t),e.append(a),c.append(e)});const u=document.createElement("li");u.classList.add("gallery__nav-item");const i=document.createElement("button");i.classList.add("button","gallery__nav-button","gallery__nav-button--is-active"),i.setAttribute("data-filter","*"),i.type="button",i.textContent="Вперемешку",u.append(i),d.append(u);const m=[];y.forEach(n=>{n.filters.forEach(e=>{if(!m.includes(e)){m.push(e);const a=document.createElement("li");a.classList.add("gallery__nav-item");const t=document.createElement("button");t.classList.add("button","gallery__nav-button"),t.setAttribute("data-filter",`.${e}`),t.type="button",t.textContent=e,a.append(t),d.append(a)}})});const r=document.createElement("li");r.classList.add("gallery__nav-marker"),d.append(r);let s=document.querySelector('.gallery__nav-button[data-filter="*"]');const f=imagesLoaded(c),_=new URLSearchParams(window.location.search).get("filter");_&&(s=document.querySelector(`.gallery__nav-button[data-filter="${_}"]`),s.click()),s.classList.add("gallery__nav-button--is-active"),r.style.left=`${s.offsetLeft}px`,r.style.width=`${s.offsetWidth}px`,f.on("done",()=>{h.style.display="none",c.classList.remove("gallery__list--is-hidden");const n=new Isotope(c,{itemSelector:".gallery__item"});n.arrange({filter:s.getAttribute("data-filter")});const e=document.querySelectorAll(".gallery__nav-button");d.addEventListener("click",a=>{a.preventDefault();const{target:t}=a;if(!t.matches(".gallery__nav-button"))return;const l=t.getAttribute("data-filter");n.arrange({filter:l}),e.forEach(g=>g.classList.remove("gallery__nav-button--is-active")),t.classList.add("gallery__nav-button--is-active"),r.style.left=`${t.offsetLeft}px`,r.style.width=`${t.offsetWidth}px`,l==="*"?history.pushState(null,null,window.location.pathname):history.pushState(null,null,`?filter=${l}`)})}),new GridFx(c)}).catch(o=>console.error(o));
